<!DOCTYPE html>
<html lang="te">
  <head>
    <meta charset="UTF-8" />
    <title>24/7 Telugu Short News</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      body {
        background: #050505;
        color: #f7f7f7;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
        margin: 0;
        padding: 0;
      }
      header {
        position: sticky;
        top: 0;
        z-index: 10;
        background: #050505;
        padding: 12px 16px;
        border-bottom: 1px solid #222;
      }
      h1 {
        font-size: 20px;
        margin: 0;
      }
      #news-list {
        padding: 10px 12px 40px;
      }
      .card {
        background: #111;
        border-radius: 14px;
        padding: 12px;
        margin-bottom: 10px;
        border: 1px solid #222;
      }
      .title {
        font-size: 15px;
        font-weight: 600;
        margin-bottom: 6px;
      }
      .summary {
        font-size: 13px;
        line-height: 1.5;
        color: #d0d0d0;
      }
      .meta {
        margin-top: 6px;
        font-size: 11px;
        color: #999;
      }
      a {
        color: #4ea5ff;
        text-decoration: none;
      }
      .loading,
      .error {
        text-align: center;
        padding: 16px;
        font-size: 14px;
        color: #aaa;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>24/7 Telugu Short News</h1>
    </header>
    <div id="news-list">
      <div class="loading">లోడ్ అవుతోంది...</div>
    </div>

    <script>
      async function loadNews() {
        const container = document.getElementById("news-list");
        container.innerHTML = '<div class="loading">లోడ్ అవుతోంది...</div>';
        try {
          const res = await fetch("/api/news?limit=50");
          if (!res.ok) throw new Error("Request failed");
          const data = await res.json();
          if (!data.items || data.items.length === 0) {
            container.innerHTML =
              '<div class="loading">ఇంకా న్యూస్ ఏమీ లేదు</div>';
            return;
          }
          container.innerHTML = "";
          for (const item of data.items) {
            const card = document.createElement("div");
            card.className = "card";
            card.innerHTML = `
              <div class="title">${item.title ?? ""}</div>
              <div class="summary">${(item.summary ?? "")
                .replace(/\n/g, "<br />")
                .trim()}</div>
              <div class="meta">
                <a href="${item.link}" target="_blank">ఫుల్ న్యూస్ చూడండి</a>
              </div>
            `;
            container.appendChild(card);
          }
        } catch (e) {
          console.error(e);
          container.innerHTML =
            '<div class="error">సర్వర్ డౌన్ ఉంది లేదా నెట్ వర్క్ లేదు.</div>';
        }
      }

      loadNews();
    </script>
  </body>
</html>
