<!doctype html>
<html lang="te">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>24/7 Telugu Short News</title>
  <link rel="stylesheet" href="/static/css/app.css" />
  <link rel="stylesheet" href="/static/css/styles.css" />
</head>
  <!-- small in-page logger ‚Äî paste before </body> -->
<script>
(function(){
  // create overlay
  const box = document.createElement('div');
  box.id = 'mini-logger';
  Object.assign(box.style, {
    position:'fixed', left:0, right:0, bottom:0, zIndex:99999,
    maxHeight:'35vh', overflowY:'auto', background:'rgba(0,0,0,0.8)',
    color:'#ffeb99', fontSize:'13px', padding:'8px', fontFamily:'monospace'
  });
  document.body.appendChild(box);

  function logToBox(type, msg){
    const el = document.createElement('div');
    el.textContent = '[' + type.toUpperCase() + '] ' + (typeof msg === 'string' ? msg : JSON.stringify(msg));
    el.style.padding='4px 0';
    if(type==='error'){ el.style.color='#ff8080'; }
    box.appendChild(el);
    // keep bottom visible
    box.scrollTop = box.scrollHeight;
  }

  // intercept console
  ['log','info','warn','error'].forEach(fn=>{
    const orig = console[fn];
    console[fn] = function(...args){
      try{ logToBox(fn, args.map(a=> (typeof a==='object'? JSON.stringify(a): String(a))).join(' ')); }catch(e){}
      orig.apply(console,args);
    };
  });

  // show fetch responses (optional): wrap window.fetch
  if(window.fetch){
    const origFetch = window.fetch;
    window.fetch = async function(...args){
      try{
        logToBox('info','fetch ‚Üí '+ (args[0] || '') );
        const res = await origFetch.apply(this,args);
        // clone so we don't consume body for the app
        const clone = res.clone();
        clone.text().then(t=> {
          const short = t.length>800? t.slice(0,800)+'‚Ä¶': t;
          logToBox('info','fetch resp '+res.status+': '+ short);
        }).catch(()=>{});
        return res;
      }catch(err){
        logToBox('error','fetch error: '+err);
        throw err;
      }
    };
  }

  // window.onerror catch
  window.addEventListener('error', (ev)=>{
    logToBox('error', ev.message + ' @ ' + (ev.filename||'') + ':' + (ev.lineno||''));
  });

  // unhandled rejections
  window.addEventListener('unhandledrejection', (ev)=>{
    logToBox('error','unhandledrejection: ' + (ev.reason && ev.reason.message ? ev.reason.message : JSON.stringify(ev.reason)));
  });

  // small toggle on top-left to collapse
  const togg = document.createElement('button');
  togg.textContent = 'Logger';
  Object.assign(togg.style, {position:'fixed', left:6, bottom:'36vh', zIndex:999999, padding:'6px 8px', background:'#111', color:'#fff', border:'1px solid #444', cursor:'pointer'});
  togg.onclick = ()=> box.style.display = (box.style.display==='none'?'block':'none');
  document.body.appendChild(togg);

  logToBox('info','In-page logger active ‚Äî use toggle button to hide/show. Fetches and console.* will appear here.');
})();
</script>
<body>
  <header class="app-header">
    <div class="logo">üîÜ</div>
    <h1>24/7 Telugu Short News</h1>
  </header>

  <main id="app">
    <article id="news-card" class="news-card" data-id="">
      <img id="news-image" src="" alt="" style="display:none; max-width:100%; border-radius:6px; margin-bottom:8px;" />
      <h2 id="news-title">‡∞ü‡±à‡∞ü‡∞ø‡∞≤‡±ç ‡∞≤‡±á‡∞¶‡±Å</h2>
      <p id="news-summary">‡∞®‡±ç‡∞Ø‡±Ç‡∞∏‡±ç ‡∞≤‡±ã‡∞°‡±ç ‡∞Ö‡∞µ‡±Å‡∞§‡±ã‡∞Ç‡∞¶‡∞ø...</p>
    </article>

    <div class="controls">
      <button id="more-info-btn" class="big-btn">‡∞Æ‡∞∞‡∞ø‡∞Ç‡∞§ ‡∞ö‡∞¶‡∞µ‡∞Ç‡∞°‡∞ø</button>
      <div class="reactions">
        <button id="like-btn">üëç <span id="like-count">0</span></button>
        <button id="dislike-btn">üëé <span id="dislike-count">0</span></button>
      </div>
    </div>

    <div class="comment-area">
      <input id="comment-input" placeholder="‡∞Æ‡±Ä ‡∞Ö‡∞≠‡∞ø‡∞™‡±ç‡∞∞‡∞æ‡∞Ø‡∞æ‡∞®‡±ç‡∞®‡∞ø ‡∞∞‡∞æ‡∞Ø‡∞Ç‡∞°‡∞ø..." />
      <button id="comment-send">‡∞™‡∞Ç‡∞™‡∞Ç‡∞°‡∞ø</button>
    </div>
  </main>

  <script type="module" src="/static/js/main.js"></script>
</body>
</html>
<script>
window.onerror = function(msg, src, line, col, error) {
    let box = document.getElementById("error-box");
    if (!box) {
        box = document.createElement("div");
        box.id = "error-box";
        box.style.position = "fixed";
        box.style.bottom = "0";
        box.style.left = "0";
        box.style.width = "100%";
        box.style.maxHeight = "200px";
        box.style.overflowY = "auto";
        box.style.background = "rgba(0,0,0,0.8)";
        box.style.color = "yellow";
        box.style.fontSize = "14px";
        box.style.padding = "8px";
        box.style.zIndex = "99999";
        document.body.appendChild(box);
    }
    box.innerHTML = `
        <b>ERROR:</b> ${msg}<br>
        <b>File:</b> ${src}<br>
        <b>Line:</b> ${line}, <b>Col:</b> ${col}<br>
        <pre>${error && error.stack ? error.stack : ""}</pre>
    `;
};
</script>
